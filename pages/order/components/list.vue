<template>
	<scroll-view   class="order-list"  scroll-top="60" scroll-y @scrolltolower="scroll" >
		<view class="card" v-for="(item,index) in data" :key="index" @click="itemClick(item)">
			<view class="flex-row-space-between">
				<text>{{item.createTime}}</text>
				<text>{{item.status|format}}</text>
			</view>
			<view class="flex-row">
				<view class="flex-item" v-for="items of item.orderDetails">
					<text>{{items.medicineName}}</text>
					<text>{{'x'+items.number}}</text>
				</view>
			</view>
			<view class="flex-row-space-between">
				<view class="flex-col">
					<text style="color:red;">￥{{item.payMoney}}</text>
				</view>
				<button @click.stop="ok(item)" class="cu-btn shadow-blur round" style="background-color:var(--background-color-main-0);color:#fff;">再次购买</button>
			</view>
		</view>
	</scroll-view>
</template>

<script>
	export default {
		filters:{
			 format:function (value){
				 let data=null;
				  switch(value){
						case 0:
						data='已下单';
						break;
						case 1:
						data='待付款';
						break;
						case 2:
						data='已付款';
						break;
						case 3:
						data='已完成';
						break;
						case 4:
						data='已过期';
						break;
						case 5:
						data='待发货';
						break;
						default:
						data='已发货';
						}
						return data
			}
		},
		props: {
			data: {
				type: Array,
				default: [],
			},
		},
		methods: {
			scroll(e){
				console.log('scroll',e)
				this.$emit('scrollBottom')
			},
			itemClick(item){
				this.$emit('itemClick', item)
			},
			ok(val) {
				this.$emit('ok', val)
			}
		}
	}
</script>

<style lang="scss" scoped>
	.cur {
		color: var(--font-color-main-0);
	}
	.order-list{
		position: fixed;
		width: 100%;
		top: 60px;
		z-index: 2;
		padding-top: 60px;
		height: 100%;
		@media (prefers-color-scheme: dark) {
			background-color: #9e9e9e;
		}
	}
	.card {
		background-color: var(--background-color-0);
		margin-bottom: 20rpx;
		padding: 20rpx;
	}

	.flex-row {
		flex-wrap: wrap;
		margin-top: 10rpx;
	}

	.flex-item {
		width: 50%;
		margin-bottom: 10rpx;

		text {
			margin-right: 20rpx;
		}
	}
</style>
